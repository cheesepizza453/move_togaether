'use client';

import { useState } from 'react';
import { Home, Plus, Heart, User } from 'lucide-react';
import { useSplash } from './SplashProvider';

const BottomNavigation = () => {
  const [activeTab, setActiveTab] = useState('home');
  const { showSplash } = useSplash();

  // Splash가 표시되는 동안 하단 네비게이션 숨김
  if (showSplash) {
    return null;
  }

  const tabs = [
    {
      id: 'home',
      label: '홈',
      icon: Home,
      href: '/',
      customIcon: (
        <svg width="20" height="20" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g filter="url(#filter0_d_5_104)">
            <path d="M32 11.7895C32 10.6842 31.3333 9.57895 30.3333 8.63158C29.1667 7.68421 28 6.89474 26.8333 6.10526C25.6667 5.31579 24.5 4.68421 23.3333 4.05263C22.5 3.57895 21.5 3.10526 20.5 2.78947C19.3333 2.47368 18.1667 2 17 2C15.5 2 14.1667 2.63158 13 3.26316C11.6667 3.89474 10.5 4.52632 9.33333 5.15789C8.33333 5.63158 7.5 6.26316 6.5 6.89474C5.5 7.52632 4.66667 8.1579 3.66667 8.78947C2.66667 9.57895 2 10.6842 2 11.7895V24.2632C2 28.5263 5.66667 32 10.1667 32H23.8333C28.3333 32 32 28.5263 32 24.2632C32 24.2632 32 14.1579 32 11.7895ZM13.8333 29.9474V20.3158C13.8333 19.3684 14.5 18.7368 15.5 18.7368H18.5C19.5 18.7368 20.1667 19.3684 20.1667 20.3158V29.9474H13.8333ZM29.8333 24.2632C29.8333 27.4211 27.1667 29.9474 23.6667 29.9474H22.1667V20.3158C22.1667 18.4211 20.5 16.8421 18.5 16.8421H15.5C13.5 16.8421 11.8333 18.4211 11.8333 20.3158V29.9474H10.1667C6.83333 29.9474 4 27.4211 4 24.2632C4 22.6842 4 21.1053 4 19.5263C4 17.9474 4 17 4 15.7368C4 14.4737 3.66667 12.7368 4.16667 11.4737C4.5 10.5263 5.33333 10.0526 6.16667 9.57895C7 9.10526 8.16667 8.31579 9.16667 7.68421C10.6667 6.73684 12 6.10526 13.6667 5.31579C14.6667 4.84211 15.8333 4.21053 17 4.21053C18 4.21053 18.6667 4.68421 19.5 5C20.3333 5.31579 21 5.63158 21.8333 5.94737C23.3333 6.73684 24.8333 7.52632 26.3333 8.47368C27.1667 9.10526 28.1667 9.73684 29 10.3684C29.6667 10.8421 29.8333 11.4737 30 11.9474V24.2632H29.8333Z" fill="#FFC928"/>
          </g>
          <defs>
            <filter id="filter0_d_5_104" x="0" y="0" width="34" height="34" filterUnits="userSpaceOnUse" colorInterpolationFilters="sRGB">
              <feFlood floodOpacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset/>
              <feGaussianBlur stdDeviation="1"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 1 0 0 0 0 0.815686 0 0 0 0 0.266667 0 0 0 1 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5_104"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5_104" result="shape"/>
            </filter>
          </defs>
        </svg>

      )
    },
    {
      id: 'shelter',
      label: '보호소 위치',
      icon: null, // SVG를 직접 사용할 예정
      href: '/shelter',
      customIcon: (
        <svg width="20" height="20" viewBox="0 0 27 26" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M23.6682 2.41941L18.0073 0.370681C17.2525 0.101112 16.3898 0.262853 15.7968 0.694165L15.4733 0.532423C14.9342 0.155025 14.1794 0.370681 13.5324 0.640251L8.84189 2.68898C8.46449 2.90464 8.03318 2.90464 7.54795 2.68898L2.80353 0.640251C2.21047 0.370681 1.50959 0.424595 0.916537 0.801993C0.323484 1.17939 0 1.82636 0 2.58115V21.0197C0 21.7745 0.377398 22.4754 1.02437 22.8528C1.83307 23.338 2.6957 23.8232 3.50441 24.3085C3.61223 24.3085 3.77398 24.4702 3.8818 24.5241C4.04355 24.632 4.15137 24.6859 4.31312 24.7937C4.52877 24.9554 4.79834 25.0633 5.014 25.225C5.60705 25.6024 6.68533 25.9259 7.38621 25.9798C8.24883 26.0337 9.05754 25.9798 9.92017 25.8181C10.8367 25.6024 11.6454 25.0633 12.4541 24.578C12.9393 24.2546 13.4246 23.985 13.9637 23.6615C14.2872 23.4459 14.6107 23.2841 14.9342 23.0685C15.1498 22.9067 15.4733 22.7989 15.4733 22.4754C15.4733 21.8491 15.2576 21.5466 14.9342 21.3309C14.5568 21.1152 13.9637 21.5049 13.6402 21.7206C13.3167 21.9363 12.9933 22.098 12.6698 22.3137C11.9689 22.745 11.268 23.1763 10.5132 23.6076C10.3515 23.7154 10.1358 23.8232 9.97408 23.9311C9.86625 23.985 9.75842 24.0928 9.6506 24.0928C9.59668 24.0928 9.54277 24.0928 9.48886 24.0389C9.43494 23.9311 9.48886 23.6615 9.48886 23.5537V4.62988C9.48886 4.52206 9.54277 4.41423 9.59668 4.41423L14.4489 2.41941C14.4489 2.41941 14.5568 2.52724 14.5568 2.63507V16.7605C14.5568 17.0301 14.8802 17.0301 14.9881 16.9762C16.125 16 16.125 16 16.125 16C16.125 16 16.8212 15.5 16.8212 14.8196V2.31158C16.8212 2.25767 16.8751 2.14984 16.929 2.14984C16.9829 2.14984 17.0907 2.04201 17.2525 2.04201C17.4142 2.04201 17.3603 2.04201 17.4681 2.04201L23.1291 4.09074C23.2908 4.09074 23.3447 4.25249 23.3447 4.3064V14.1727C23.3447 14.3883 23.3383 14.2844 23.5 14.5L24.5308 15.5205C24.8004 15.6822 25.1239 15.5205 25.1239 15.3588V4.36031C25.1239 3.49769 24.5848 2.74289 23.7221 2.41941H23.6682ZM6.9549 23.8232C6.9549 23.985 6.84707 24.0389 6.84707 24.0389C6.79316 24.0389 6.73924 24.0389 6.68533 24.0389L1.99482 21.2893C1.9409 21.2893 1.88699 21.1815 1.88699 21.0736V2.63507C1.88699 2.47333 1.9409 2.41941 2.10264 2.41941L6.79316 4.46814C6.84707 4.46814 6.90099 4.57597 6.90099 4.6838V23.8772L6.9549 23.8232Z" fill="#B6B6B6"/>
          <path d="M26.0209 24.3624L23.9182 22.2597C24.5113 21.505 24.8887 20.5345 24.8887 19.5101C24.8887 17.0301 22.8939 15.0353 20.4138 15.0353C17.9338 15.0353 15.939 17.0301 15.939 19.5101C15.939 21.9902 17.9338 23.9411 20.4138 23.9411C21.75 23.9411 22.786 23.2841 22.786 23.2841L24.6191 25.6024C24.9965 26.0337 25.5896 26.0876 25.967 25.7102C26.3444 25.3868 26.3444 24.7398 25.967 24.3624H26.0209ZM17.772 19.5101C17.772 18.0545 18.9581 16.8684 20.4138 16.8684C21.8695 16.8684 23.0556 18.0545 23.0556 19.5101C23.0556 20.9658 21.8695 22.1519 20.4138 22.1519C18.9581 22.1519 17.772 20.9658 17.772 19.5101Z" fill="#B6B6B6"/>
        </svg>
      )
    },
    {
      id: 'post',
      label: '',
      icon: Plus,
      href: '/posts/new',
      isCircle: true
    },
    {
      id: 'favorites',
      label: '저장목록',
      icon: Heart,
      href: '/favorites',
      customIcon: (
        <svg width="20" height="20" viewBox="0 0 32 26" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M28.9235 2.32939C27.247 0.624133 24.9717 -0.228496 22.5767 0.0557133C20.7804 0.25872 19.1438 1.19255 17.8665 2.4918L16.7089 3.66924C16.4295 3.95345 16.0702 4.07525 15.711 4.11585C15.3517 4.11585 14.9925 3.95345 14.7131 3.66924L13.5555 2.4918C12.318 1.19255 10.6814 0.25872 8.88518 0.0557133C6.49016 -0.228496 4.17498 0.583532 2.49847 2.28879C0.861869 4.03465 0.0236133 6.34893 0.303032 8.78501C0.502617 10.6121 1.42071 12.2767 2.69805 13.576L4.9334 15.8497L6.41033 17.3519L14.3139 25.391C14.7131 25.797 15.232 26 15.7509 26C16.2698 26 16.7887 25.7564 17.1879 25.391L25.0915 17.3519L26.5684 15.8497L28.8037 13.576C30.0811 12.2767 30.9992 10.6121 31.1988 8.78501C31.4782 6.34893 30.6 4.0405 28.9235 2.33524L28.9235 2.32939ZM27.4466 11.9113L25.0116 14.388L23.5347 15.8903L16.669 22.8737C16.3896 23.1579 16.0303 23.2797 15.6711 23.3203C15.3118 23.3203 14.9526 23.1579 14.6731 22.8737L7.80742 15.8903L6.33049 14.388L3.89556 11.9113C2.8178 10.8151 2.25896 9.39403 2.25896 7.85118C2.25896 6.30833 2.8178 4.88728 3.89556 3.79104C4.9334 2.6948 6.37041 2.12638 7.88726 2.12638C9.4041 2.12638 10.8012 2.6948 11.879 3.79104L14.3139 6.26772C14.6332 6.59254 15.0723 6.91735 15.5912 6.91735C16.1102 6.91735 16.6291 6.63314 17.0282 6.26772L19.4632 3.79104C20.5409 2.6948 21.938 2.12638 23.4549 2.12638C24.9717 2.12638 26.3688 2.6948 27.4466 3.79104C28.5243 4.84668 29.0832 6.30833 29.0832 7.85118C29.0832 9.39403 28.5243 10.8151 27.4466 11.9113Z" fill="#B6B6B6"/>
        </svg>
      )
    },
    {
      id: 'mypage',
      label: '마이페이지',
      icon: User,
      href: '/mypage',
      customIcon: (
        <svg width="20" height="20" viewBox="0 0 25 27" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12.2376 11.6825C15.3011 11.6825 17.8318 9.01856 17.8318 5.95505C17.8318 2.89155 15.3011 0.494019 12.2376 0.494019C9.1741 0.494019 6.64337 3.02474 6.64337 6.08825C6.64337 9.15176 9.1741 11.6825 12.2376 11.6825ZM12.2376 2.22557C14.3687 2.22557 16.1003 3.95711 16.1003 6.08825C16.1003 8.21939 14.3687 9.95094 12.2376 9.95094C10.1065 9.95094 8.37492 8.21939 8.37492 6.08825C8.37492 3.95711 10.1065 2.22557 12.2376 2.22557Z" fill="#B6B6B6"/>
          <path d="M22.2273 16.7439C21.295 15.5452 20.2294 14.6128 18.8974 13.9468C16.8995 13.0145 14.7684 12.6149 12.504 12.6149H12.1044C9.97331 12.6149 7.70898 13.0145 5.71104 13.9468C4.37908 14.6128 3.18031 15.5452 2.24794 16.7439C1.18237 18.2091 0.25 20.0738 0.25 21.9386C0.25 23.1374 0.649588 24.3361 1.58196 25.0021C2.51433 25.6681 3.7131 26.0677 4.91186 26.3341C7.30939 26.8668 9.84011 27 12.2376 27C14.6352 27 17.1659 26.8668 19.5634 26.3341C20.7622 26.0677 21.9609 25.6681 22.8933 25.0021C23.9589 24.3361 24.3585 23.1374 24.2253 21.9386C24.2253 20.0738 23.2929 18.2091 22.2273 16.7439ZM21.9609 23.2705C21.295 23.9365 20.4958 24.0697 19.1638 24.4693C16.8995 25.0021 14.6352 25.2685 12.3708 25.2685C10.1065 25.2685 7.84217 25.0021 5.57784 24.4693C4.11268 24.0697 3.4467 23.8033 2.78072 23.2705C2.51433 23.0042 2.38114 22.4714 2.38114 22.0718C2.38114 21.0062 2.64753 19.9406 3.18031 19.0083C4.51227 16.8771 7.043 14.4796 12.3708 14.4796C17.6987 14.4796 20.3626 16.8771 21.5614 19.0083C22.0941 19.8075 22.3605 21.0062 22.3605 22.0718C22.3605 22.4714 22.2273 23.0042 21.9609 23.2705Z" fill="#B6B6B6"/>
        </svg>
      )
    }
  ];

  const handleTabClick = (tabId) => {
    setActiveTab(tabId);
    // 실제로는 라우팅 처리
    console.log('탭 클릭:', tabId);
  };

  return (
    <div className="fixed bottom-0 left-0 right-0 bg-white border border-gray-300 shadow-lg z-50 lg:hidden rounded-t-3xl">
      {/* 상단 중앙 반원형 돌출부 */}
      <div className="absolute -top-4 left-1/2 transform -translate-x-1/2 w-16 h-8 bg-white border-t border-gray-300 rounded-t-full"></div>

      {/* 노란색 강조선 */}
      <div className="absolute -top-4 left-1/2 transform -translate-x-1/4 w-14 h-6 rounded-t-full"></div>

      <div className="flex items-center justify-around px-2 pb-3">
        {tabs.map((tab) => {
          const Icon = tab.icon;
          const isActive = activeTab === tab.id;
          const isCircle = tab.isCircle;

          return (
            <button
              key={tab.id}
              onClick={() => handleTabClick(tab.id)}
              className={`flex flex-col items-center justify-center w-full pb-2 pt-1 px-1 transition-all duration-200 ${
                isActive
                  ? 'text-yellow-500'
                  : 'text-gray-500 hover:text-gray-700'
              }`}
            >
              <div className={`relative transition-all duration-200 ${
                isCircle
                  ? 'p-4 rounded-full bg-orange-200 text-red-500 shadow-lg hover:bg-orange-300 hover:shadow-xl transform hover:scale-105'
                  : `p-1.5 rounded-lg ${isActive ? 'bg-yellow-50' : 'hover:bg-gray-50'}`
              }`}>
                {tab.customIcon ? (
                  <div className={`flex items-center justify-center w-5 h-5 ${isActive ? 'text-yellow-500' : 'text-gray-500'}`}>
                    {tab.customIcon}
                  </div>
                ) : (
                  <Icon className={`transition-all duration-200 ${
                    isCircle
                      ? 'w-7 h-7'
                      : `w-5 h-5 ${isActive ? 'text-yellow-500 scale-110' : 'text-gray-500'}`
                  }`} />
                )}
              </div>

              {/* 라벨 텍스트 */}
              {!isCircle && (
                <span className={`text-xs mt-1 font-medium transition-colors ${
                  isActive ? 'text-yellow-500' : 'text-gray-500'
                }`}>
                  {tab.label}
                </span>
              )}
            </button>
          );
        })}
      </div>
    </div>
  );
};

export default BottomNavigation;
